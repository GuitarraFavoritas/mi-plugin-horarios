{"version":3,"file":"admin.bundle.js","mappings":"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","sources":["webpack://mi-plugin-horarios/./assets/src/js/admin/modal-ajax.js","webpack://mi-plugin-horarios/./assets/src/js/admin/modal-form-interaction.js","webpack://mi-plugin-horarios/./assets/src/js/admin/modal-init.js","webpack://mi-plugin-horarios/./assets/src/js/admin/modal-validation.js","webpack://mi-plugin-horarios/./assets/src/js/admin/table-actions.js","webpack://mi-plugin-horarios/external var \"jQuery\"","webpack://mi-plugin-horarios/webpack/bootstrap","webpack://mi-plugin-horarios/webpack/runtime/compat get default export","webpack://mi-plugin-horarios/webpack/runtime/define property getters","webpack://mi-plugin-horarios/webpack/runtime/hasOwnProperty shorthand","webpack://mi-plugin-horarios/webpack/runtime/make namespace object","webpack://mi-plugin-horarios/./assets/src/js/admin/main.js"],"sourcesContent":["// assets/src/js/admin/modal-ajax.js\r\nimport $ from 'jquery';\r\nimport { validarFormulario } from './modal-validation';\r\nimport { closeModal } from './modal-init';\r\n\r\n/**\r\n * Inicializa el manejador de envío AJAX para el formulario del modal.\r\n * @param {jQuery} $modal - El objeto jQuery del elemento modal.\r\n */\r\nexport function initAjaxSubmit($modal) {\r\n    console.log(`Inicializando manejador CLICK para #mph-guardar-horario...`);\r\n     if (!$modal || !$modal.length || typeof $modal.find !== 'function') {\r\n         console.error(\"initAjaxSubmit: No se recibió el objeto $modal válido.\");\r\n         return;\r\n      }\r\n\r\n      const $spinnerModal = $modal.find('.mph-modal-acciones .spinner');\r\n      const $feedbackModal = $modal.find('.mph-modal-feedback');\r\n      const $errorModal = $modal.find('.mph-modal-error');\r\n      const $tablaContainer = $('#mph-tabla-horarios-container'); // Asumimos que existe fuera del modal\r\n\r\n    $modal.on('click', '#mph-guardar-horario', function(e) {\r\n         console.log('--- Botón Guardar Clickeado ---');\r\n\r\n         console.log('Estado de window.mph_admin_obj JUSTO AL HACER CLICK:', window.mph_admin_obj);\r\n         const $button = $(this);\r\n         const $form = $modal.find('form#mph-form-horario');\r\n\r\n         if (!$form.length) {\r\n             console.error(\"Error en click Guardar: No se encontró el formulario.\");\r\n             alert(\"Error interno del formulario.\");\r\n             return;\r\n         }         \r\n\r\n        const actionMode = $button.attr('data-action-mode') || 'save_full';\r\n         console.log(\"Modo de Acción (leído del botón):\", actionMode);\r\n\r\n         // --- Validación ---\r\n         let isValid = false;\r\n         if (actionMode === 'update_vacantes') {\r\n             console.log(\"Validando solo vacantes...\");\r\n             const $vacantesInput = $form.find('#mph_vacantes'); // Buscar input\r\n             const vacantesVal = parseInt($vacantesInput.val(), 10);\r\n             // Validar si es número y no negativo\r\n             if ( $vacantesInput.length && !isNaN(vacantesVal) && vacantesVal >= 0 ) {\r\n                 isValid = true;\r\n                 if ($errorModal.length) $errorModal.hide().text(''); // Limpiar error si es válido\r\n             } else {\r\n                 isValid = false;\r\n                 if ($errorModal.length) $errorModal.text(window.mph_admin_obj?.i18n?.error_vacantes_negativas || 'Las vacantes deben ser un número positivo.').show();\r\n             }\r\n             console.log(\"Resultado Validación Vacantes:\", isValid);\r\n         } else { // save_full, assign_to_existing, edit_existing_disp\r\n             console.log('Llamando a validarFormulario (modo completo)...');\r\n             isValid = validarFormulario($form); // Usar validación completa\r\n             if (!isValid) console.log('validarFormulario (modo completo) devolvió false.');\r\n         }\r\n\r\n         if (!isValid) { return; } // Detener si no es válido\r\n\r\n        console.log('Validación pasada. Procediendo con AJAX...');\r\n\r\n        // Feedback visual\r\n        if ($spinnerModal.length) $spinnerModal.addClass('is-active');\r\n        if ($feedbackModal.length) $feedbackModal.hide().text('');\r\n        if ($errorModal.length) $errorModal.hide().text('');\r\n        $button.prop('disabled', true);\r\n\r\n        console.log('Spinner y botón modificados (intentado). Preparando datos AJAX...');\r\n        const formData = $form.serialize();\r\n\r\n        // Acceso seguro al objeto global mph_admin_obj\r\n        if ( !window.mph_admin_obj || typeof window.mph_admin_obj.ajax_url === 'undefined' || window.mph_admin_obj.ajax_url === '' ) {\r\n            console.error(\"Error crítico: window.mph_admin_obj o window.mph_admin_obj.ajax_url no están definidos o están vacíos.\");\r\n            if ($errorModal.length) $errorModal.text(\"Error de configuración interna (AJAX URL). Contacte al administrador.\").show();\r\n            $button.prop('disabled', false);\r\n            if ($spinnerModal.length) $spinnerModal.removeClass('is-active');\r\n            return; // Detener si falta\r\n        }\r\n\r\n        // --- Preparar Datos AJAX según el modo ---\r\n        let dataToSend = '';\r\n        let ajaxAction = ''; // Variable para la acción\r\n\r\n        let nonceValue = '';\r\n        let nonceFieldName = '';    \r\n        if (actionMode === 'update_vacantes') {\r\n            ajaxAction = 'mph_actualizar_vacantes';\r\n            nonceFieldName = 'mph_nonce_actualizar_vacantes'; // Nombre del nuevo nonce field\r\n            const $nonceField = $form.find('input[name=\"' + nonceFieldName + '\"]');\r\n            if ($nonceField.length) { nonceValue = $nonceField.val(); }\r\n             else { \r\n                console.error(\"Campo Nonce para Actualizar Vacantes no encontrado en el formulario!\");\r\n                if ($errorModal.length) $errorModal.text(window.mph_admin_obj?.i18n?.error_seguridad_interna /*|| \"Error de seguridad interno (Nonce UV).\"*/).show();\r\n                $button.prop('disabled', false); if ($spinnerModal.length) $spinnerModal.removeClass('is-active'); \r\n                return; }\r\n\r\n            const horarioId = $form.find('#mph_horario_id_editando').val();\r\n            const vacantesVal = $form.find('#mph_vacantes').val();\r\n            dataToSend = { // Construir objeto\r\n                action: ajaxAction,\r\n                horario_id: horarioId,\r\n                vacantes: vacantesVal,\r\n                [nonceFieldName]: nonceValue // Incluir nonce específico\r\n            };\r\n             console.log('Datos a enviar (update_vacantes):', dataToSend);\r\n\r\n\r\n        } else { // save_full, assign_to_existing, edit_existing_disp\r\n             console.log(`Preparando datos para ${actionMode}...`);\r\n             ajaxAction = 'mph_guardar_horario_maestro';\r\n             const formData = $form.serialize(); // Incluye horario_id si está en el form\r\n             dataToSend = formData + '&action=' + ajaxAction;\r\n             console.log(`Datos COMPLETOS a enviar (${actionMode}):`, dataToSend);\r\n        }       \r\n\r\n        // --- Enviar Petición AJAX ---\r\n        if (!window.mph_admin_obj || !window.mph_admin_obj.ajax_url) { /*...*/ return; }\r\n        const ajax_url = window.mph_admin_obj.ajax_url;\r\n        const i18n = window.mph_admin_obj.i18n || {};     \r\n\r\n    // Petición AJAX\r\n    $.post(ajax_url, dataToSend)\r\n        .done(function (response) {\r\n           if (response.success) {\r\n                console.log(\"Respuesta AJAX exitosa:\", response);\r\n                if ($feedbackModal.length) $feedbackModal.text(i18n.horario_guardado || '¡Guardado!').show();\r\n                if (response.data && response.data.html_tabla && $tablaContainer.length) {\r\n                    console.log(\"Actualizando tabla de horarios...\");\r\n                    $tablaContainer.html(response.data.html_tabla);\r\n                } else {\r\n                     console.warn(\"Respuesta exitosa pero no se encontró HTML de tabla para actualizar.\");\r\n                }\r\n                setTimeout(function () { closeModal($modal); }, 1500);\r\n            } else {\r\n                console.error('Error servidor (success=false):', response.data?.message);\r\n                if ($errorModal.length) $errorModal.text(response.data?.message || i18n.error_general || 'Error desconocido.').show();\r\n            }\r\n        })\r\n        .fail(function (jqXHR, textStatus, errorThrown) {\r\n           console.error(\"Error AJAX:\", textStatus, errorThrown, jqXHR.responseText);\r\n           // Mostrar mensaje de error específico si es 403 (Nonce)\r\n            if (jqXHR.status === 403) {\r\n                 if ($errorModal.length) $errorModal.text(i18n.error_seguridad || 'Error de seguridad. Intente recargar la página.').show();\r\n            } else {\r\n                if ($errorModal.length) $errorModal.text(i18n.error_general || 'Error de comunicación.').show();\r\n            }\r\n        })\r\n        .always(function () {\r\n            console.log(\"Petición AJAX completada (always).\");\r\n            if ($spinnerModal.length) $spinnerModal.removeClass('is-active');\r\n            $button.prop('disabled', false);\r\n        });\r\n    }); // Fin click #mph-guardar-horario\r\n\r\n    console.log(`Manejador CLICK para #mph-guardar-horario inicializado.`);\r\n} // Fin initAjaxSubmit","// assets/src/js/admin/modal-form-interaction.js\r\nimport $ from 'jquery';\r\n\r\n// --- Selectores (Podrían pasarse o definirse globalmente si es necesario) ---\r\n// Asumimos que estos selectores apuntan a elementos que existen cuando se llama initFormInteractions\r\nconst $modal = $('#mph-modal-horario'); // Necesario para delegar eventos\r\nconst $seccionAsignacion = $('.mph-asignacion-especifica'); // Podríamos buscarlo dentro del modal: $modal.find(...)\r\nconst $btnMostrarAsignacion = $('#mph-mostrar-asignacion');\r\nconst $programasAdmisiblesContainer = $('#mph-programas-admisibles-container');\r\nconst $sedesAdmisiblesContainer = $('#mph-sedes-admisibles-container');\r\nconst $rangosAdmisiblesContainer = $('#mph-rangos-admisibles-container');\r\nconst $selectProgramaAsignado = $('#mph_programa_asignado');\r\nconst $selectSedeAsignada = $('#mph_sede_asignada');\r\nconst $selectRangoAsignado = $('#mph_rango_edad_asignado');\r\nconst $horaInicioGeneral = $('#mph_hora_inicio_general');\r\nconst $horaFinGeneral = $('#mph_hora_fin_general');\r\nconst $horaInicioAsignada = $('#mph_hora_inicio_asignada');\r\nconst $horaFinAsignada = $('#mph_hora_fin_asignada');\r\nconst $bufferAntes = $('#mph_buffer_minutos_antes');\r\nconst $bufferDespues = $('#mph_buffer_minutos_despues');\r\nconst $bufferLinkeado = $('#mph_buffer_linkeado');\r\n\r\n/**\r\n * Puebla los selects de la sección de asignación basándose\r\n * en los checkboxes seleccionados en la sección general.\r\n */\r\nexport function poblarSelectsAsignacion() {\r\n    console.log(\"Poblando selects de asignación...\"); // Log\r\n\r\n    if (typeof window.mph_admin_obj === 'undefined' || !mph_admin_obj.todos_programas) {\r\n        console.error(\"poblarSelectsAsignacion: mph_admin_obj o sus datos no están disponibles.\");\r\n        // Quizás mostrar un error al usuario o deshabilitar selects?\r\n         $selectProgramaAsignado.empty().append($('<option value=\"\">Error datos</option>'));\r\n         $selectSedeAsignada.empty().append($('<option value=\"\">Error datos</option>'));\r\n         $selectRangoAsignado.empty().append($('<option value=\"\">Error datos</option>'));\r\n        return; // No continuar si no hay datos\r\n    }\r\n\r\n    // Limpiar selects actuales\r\n    $selectProgramaAsignado.empty().append($('<option>', { value: '', text: '-- Seleccionar Programa --' }));\r\n    $selectSedeAsignada.empty().append($('<option>', { value: '', text: '-- Seleccionar Sede --' }));\r\n    $selectRangoAsignado.empty().append($('<option>', { value: '', text: '-- Seleccionar Rango --' }));\r\n\r\n    let primerProgramaNoComunOption = null;\r\n    let primerProgramaOption = null;\r\n    let primerSedeNoComunOption = null;\r\n    let primerSedeOption = null;\r\n    let primerRangoNoComunOption = null;\r\n    let primerRangoOption = null;\r\n\r\n    // Verificar si mph_admin_obj está disponible (debe cargarse antes)\r\n    if (typeof window.mph_admin_obj === 'undefined') {\r\n        console.error(\"poblarSelectsAsignacion: mph_admin_obj no está disponible.\");\r\n        return;\r\n    }\r\n\r\n    // Programas\r\n    $programasAdmisiblesContainer.find('input:checked').each(function() {\r\n        const termId = $(this).val();\r\n        const termName = $(this).parent('label').text().trim().replace(' (Común)', '');\r\n        const programaData = mph_admin_obj.todos_programas.find(p => p.term_id == termId);\r\n        const esComun = programaData ? programaData.es_comun : false;\r\n        const $option = $('<option>', { value: termId, text: termName, 'data-es-comun': esComun });\r\n        $selectProgramaAsignado.append($option);\r\n        if (primerProgramaOption === null) { primerProgramaOption = $option; }\r\n        if (!esComun && primerProgramaNoComunOption === null) { primerProgramaNoComunOption = $option; }\r\n    });\r\n    if (primerProgramaNoComunOption) { primerProgramaNoComunOption.prop('selected', true); }\r\n    else if (primerProgramaOption) { primerProgramaOption.prop('selected', true); }\r\n\r\n    // Sedes\r\n    $sedesAdmisiblesContainer.find('input:checked').each(function() {\r\n        const termId = $(this).val();\r\n        const termName = $(this).parent('label').text().trim().replace(' (Común)', '');\r\n        const sedeData = mph_admin_obj.todas_sedes.find(s => s.term_id == termId);\r\n        const esSedeComun = sedeData ? sedeData.es_comun : false;\r\n        const $option = $('<option>', { value: termId, text: termName, 'data-es-comun': esSedeComun });\r\n        $selectSedeAsignada.append($option);\r\n        if (primerSedeOption === null) { primerSedeOption = $option; }\r\n        if (!esSedeComun && primerSedeNoComunOption === null) { primerSedeNoComunOption = $option; }\r\n    });\r\n     if (primerSedeNoComunOption) { primerSedeNoComunOption.prop('selected', true); }\r\n     else if (primerSedeOption) { primerSedeOption.prop('selected', true); }\r\n\r\n    // Rangos\r\n    $rangosAdmisiblesContainer.find('input:checked').each(function() {\r\n        const termId = $(this).val();\r\n        const termName = $(this).parent('label').text().trim().replace(' (Común)', '');\r\n        const rangoData = mph_admin_obj.todos_rangos.find(r => r.term_id == termId);\r\n        const esRangoComun = rangoData ? rangoData.es_comun : false;\r\n        const $option = $('<option>', { value: termId, text: termName, 'data-es-comun': esRangoComun });\r\n        $selectRangoAsignado.append($option);\r\n        if (primerRangoOption === null) { primerRangoOption = $option; }\r\n        if (!esRangoComun && primerRangoNoComunOption === null) { primerRangoNoComunOption = $option; }\r\n    });\r\n    if (primerRangoNoComunOption) { primerRangoNoComunOption.prop('selected', true); }\r\n    else if (primerRangoOption) { primerRangoOption.prop('selected', true); }\r\n}\r\n\r\n\r\n/**\r\n * Sincroniza los valores de los campos de buffer si están linkeados.\r\n * @param {jQuery} campoModificado - El campo input que cambió.\r\n */\r\nfunction sincronizarBuffers(campoModificado) {\r\n    if ($bufferLinkeado.is(':checked')) {\r\n        const valor = campoModificado.val();\r\n        if (campoModificado.attr('id') === 'mph_buffer_minutos_antes') {\r\n            $bufferDespues.val(valor);\r\n        } else {\r\n            $bufferAntes.val(valor);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Inicializa los manejadores de eventos para la interacción del formulario del modal.\r\n */\r\nexport function initFormInteractions() {\r\n    console.log('Inicializando interacciones del formulario del modal...');\r\n\r\n    if (!$modal.length) {\r\n        console.error(\"initFormInteractions: Modal no encontrado.\");\r\n        return;\r\n    }\r\n\r\n    // Mostrar/Ocultar sección de asignación específica (delegado al modal)\r\n    $modal.on('click', '#mph-mostrar-asignacion', function () {\r\n        console.log(\"Botón Mostrar/Ocultar Asignación clickeado.\");\r\n        // Asegurarse que $seccionAsignacion es correcta\r\n        const $seccion = $modal.find('.mph-asignacion-especifica');\r\n        $seccion.slideToggle(function() {\r\n             if ($seccion.is(':visible')) {\r\n                console.log(\"Sección asignación visible. Poblando selects y prellenando horas.\");\r\n                poblarSelectsAsignacion();\r\n                // Pre-llenar horas de asignación con las generales (buscar dentro del modal)\r\n                $modal.find('#mph_hora_inicio_asignada').val($modal.find('#mph_hora_inicio_general').val());\r\n                $modal.find('#mph_hora_fin_asignada').val($modal.find('#mph_hora_fin_general').val());\r\n             } else {\r\n                 console.log(\"Sección asignación oculta.\");\r\n             }\r\n        });\r\n    });\r\n\r\n    // Actualizar selects de asignación si cambian los checkboxes generales (delegado al modal)\r\n     $modal.on('change', '#mph-programas-admisibles-container input[type=\"checkbox\"], #mph-sedes-admisibles-container input[type=\"checkbox\"], #mph-rangos-admisibles-container input[type=\"checkbox\"]', function() {\r\n        // Usar $seccionAsignacion global o buscarla de nuevo\r\n         if ($modal.find('.mph-asignacion-especifica').is(':visible')) {\r\n             console.log(\"Checkbox admisible cambiado. Repoblando selects.\");\r\n            poblarSelectsAsignacion();\r\n        }\r\n    });\r\n\r\n     // Sincronizar buffers (delegado al modal)\r\n    $modal.on('change input', '#mph_buffer_minutos_antes', function() {\r\n        sincronizarBuffers($(this));\r\n    });\r\n    $modal.on('change input', '#mph_buffer_minutos_despues', function() {\r\n        sincronizarBuffers($(this));\r\n    });\r\n\r\n    // Validaciones en tiempo real (delegadas al modal)\r\n    $modal.on('change', '#mph_hora_fin_general', function() {\r\n        // Usar $horaInicioGeneral global o buscarla: const $inicio = $modal.find('#mph_hora_inicio_general');\r\n        if ($horaInicioGeneral.val() && $(this).val() <= $horaInicioGeneral.val()) {\r\n            $modal.find('.mph-error-hora').show();\r\n        } else {\r\n            $modal.find('.mph-error-hora').hide();\r\n        }\r\n    });\r\n     $modal.on('change', '#mph_hora_fin_asignada', function() {\r\n        const $errorDiv = $modal.find('.mph-error-hora-asignada');\r\n         // Usar globales o buscar dentro del modal\r\n        const inicioAsig = $horaInicioAsignada.val();\r\n        const finAsig = $(this).val();\r\n        const inicioGen = $horaInicioGeneral.val();\r\n        const finGen = $horaFinGeneral.val();\r\n        if (inicioAsig && finAsig <= inicioAsig) { $errorDiv.text( (window.mph_admin_obj?.i18n?.error_hora_asignada_invalida) || 'Hora fin asignada debe ser posterior a inicio.').show(); }\r\n        else if (inicioGen && finGen && (inicioAsig < inicioGen || finAsig > finGen)) { $errorDiv.text( (window.mph_admin_obj?.i18n?.error_hora_asignada_rango) || 'Horas asignadas fuera del rango general.').show(); }\r\n        else { $errorDiv.hide(); }\r\n    });\r\n\r\n    console.log('Interacciones del formulario inicializadas.');\r\n}","// assets/src/js/admin/modal-init.js\r\nimport $ from 'jquery';\r\n\r\n// Variables para selectores comunes dentro del modal (podrían moverse aquí o dejarse globales en main si se prefiere)\r\nconst $feedbackModal = $('#mph-modal-horario .mph-modal-feedback');\r\nconst $errorModal = $('#mph-modal-horario .mph-modal-error');\r\nconst $spinnerModal = $('#mph-modal-horario .mph-modal-acciones .spinner');\r\n// ... otros selectores de campos si se usan en resetModalForm\r\n\r\nlet resetCallback = null; // Para guardar la función de reseteo pasada\r\n\r\n/**\r\n * Inicializa el jQuery UI Dialog.\r\n * @param {string} modalSelector - Selector CSS para el div del modal.\r\n * @param {function} closeCallback - Función a llamar al cerrar.\r\n */\r\nexport function initDialog(modalSelector, closeCallback) {\r\n    const $modal = $(modalSelector);\r\n    if (!$modal.length) {\r\n        console.error(`Error Crítico: Elemento modal \"${modalSelector}\" no encontrado.`);\r\n        return;\r\n    }\r\n\r\n    resetCallback = closeCallback; // Guardar callback\r\n\r\n    $modal.dialog({\r\n        autoOpen: false,\r\n        modal: true,\r\n        width: 600,\r\n        height: 'auto',\r\n        draggable: true,\r\n        resizable: false,\r\n        closeText: \"Cerrar\",\r\n        classes: { \"ui-dialog\": \"mph-jquery-ui-modal\" },\r\n        open: function() {\r\n            console.log(\"Evento 'open' del diálogo disparado.\");\r\n            $feedbackModal.hide().text('');\r\n            $errorModal.hide().text('');\r\n            $spinnerModal.removeClass('is-active');\r\n        },\r\n        close: function() {\r\n            console.log(\"Evento 'close' del diálogo disparado.\");\r\n            if (typeof resetCallback === 'function') {\r\n                resetCallback($(this)); // Llamar al callback de reseteo pasando el elemento\r\n            }\r\n        }\r\n    });\r\n    console.log(`Diálogo \"${modalSelector}\" inicializado.`);\r\n}\r\n\r\n/**\r\n * Abre el diálogo especificado.\r\n * @param {string} modalSelector - Selector CSS para el div del modal.\r\n */\r\nexport function openModal(modalSelector) {\r\n    const $modal = $(modalSelector);\r\n     if ($modal.length && $modal.hasClass('ui-dialog-content')) { // Verificar si ya está inicializado\r\n        console.log(`Abriendo modal \"${modalSelector}\"...`);\r\n        try {\r\n             $modal.dialog('open');\r\n             console.log(\"Modal abierto.\");\r\n         } catch(e) {\r\n             console.error(\"Error al abrir diálogo:\", e);\r\n         }\r\n     } else {\r\n         console.error(`Modal \"${modalSelector}\" no encontrado o no inicializado.`);\r\n     }\r\n}\r\n\r\n /**\r\n * Cierra el diálogo especificado.\r\n * @param {string} modalSelector - Selector CSS para el div del modal.\r\n */\r\n export function closeModal(modalSelector) {\r\n    const $modal = $(modalSelector);\r\n     if ($modal.length && $modal.hasClass('ui-dialog-content')) {\r\n         console.log(`Cerrando modal \"${modalSelector}\"...`);\r\n        $modal.dialog('close');\r\n     }\r\n }\r\n\r\n\r\n/**\r\n * Resetea el formulario dentro del modal.\r\n * @param {jQuery} $dialogElement - El objeto jQuery del elemento del diálogo.\r\n */\r\nexport function resetModalForm($dialogElement) {\r\n    console.log('Intentando resetear formulario...');\r\n     if (!$dialogElement || !$dialogElement.length) {console.error(\"resetModalForm: No se recibió $dialogElement.\"); return; }\r\n    const $form = $dialogElement.find('form#mph-form-horario');\r\n    if (!$form.length) {\r\n        console.error('Error en resetModalForm: No se encontró form#mph-form-horario dentro del contexto.');\r\n        // Loggear contenido si falla\r\n        console.log(\"Contenido HTML dentro del contexto:\", $dialogElement.html());\r\n        console.log(\"Hijos dentro del contexto:\", $dialogElement.children());\r\n        return; }\r\n    console.log('Formulario encontrado en resetModalForm. Reseteando...');\r\n    try {\r\n        $form[0].reset(); // Reset nativo\r\n        $form.find('#mph_horario_id_editando').val('');\r\n\r\n        // --- Restaurar Visibilidad ---\r\n\r\n        $dialogElement.removeClass('mph-modal-mode-edit-vacantes mph-modal-mode-edit-disp mph-modal-mode-assign'); // Quitar clases de modo\r\n\r\n       $dialogElement.find('#mph-editar-info').hide().empty();\r\n        $form.find('.mph-modal-seccion.mph-disponibilidad-general').show(); // Mostrar sección general\r\n        $form.find('.mph-modal-seccion.mph-asignacion-especifica').hide(); // Ocultar sección asignación\r\n        $form.find('#mph-mostrar-asignacion').show(); // Mostrar botón toggle\r\n        /* Finaliza Modificación */\r\n\r\n        // Reset checkboxes comunes (requiere mph_admin_obj disponible globalmente o pasado)\r\n        if (window.mph_admin_obj) {\r\n            $form.find('#mph-programas-admisibles-container input[type=\"checkbox\"]').each(function(){\r\n                 const termId = $(this).val();\r\n                 const programaData = mph_admin_obj.todos_programas.find(p => p.term_id == termId);\r\n                 $(this).prop('checked', (programaData && programaData.es_comun));\r\n            });\r\n             $form.find('#mph-sedes-admisibles-container input[type=\"checkbox\"]').each(function(){\r\n                 const termId = $(this).val();\r\n                 const sedeData = mph_admin_obj.todas_sedes.find(s => s.term_id == termId);\r\n                 $(this).prop('checked', (sedeData && sedeData.es_comun));\r\n            });\r\n             $form.find('#mph-rangos-admisibles-container input[type=\"checkbox\"]').each(function(){\r\n                 const termId = $(this).val();\r\n                 const rangoData = mph_admin_obj.todos_rangos.find(r => r.term_id == termId);\r\n                  $(this).prop('checked', (rangoData && rangoData.es_comun));\r\n            });\r\n        } else {\r\n            console.warn(\"mph_admin_obj no disponible para resetear checkboxes comunes.\");\r\n        }\r\n\r\n        // Limpiar selects y ocultar sección\r\n        $form.find('#mph_programa_asignado, #mph_sede_asignada, #mph_rango_edad_asignado').empty().append($('<option>', { value: '', text: '-- Seleccionar --' })); // Texto genérico\r\n\r\n        // Resetear errores y valores por defecto\r\n        $dialogElement.find('.mph-error-hora, .mph-error-duplicado, .mph-error-hora-asignada').hide();\r\n        $dialogElement.find('.mph-modal-feedback, .mph-modal-error').hide().text('');\r\n        $form.find('#mph_vacantes').val(1); // Restaurar valor vacantes\r\n        $form.find('#mph_buffer_minutos_antes').val(60);\r\n        $form.find('#mph_buffer_minutos_despues').val(60);\r\n        $form.find('#mph_buffer_linkeado').prop('checked', true);\r\n\r\n        // Restaurar Botón Guardar\r\n        const $btnGuardar = $form.find('#mph-guardar-horario');\r\n        if ($btnGuardar.length) {\r\n            const textoOriginal = window.mph_admin_obj?.i18n?.guardar_horario || 'Guardar Disponibilidad/Asignación';\r\n            $btnGuardar.text(textoOriginal);\r\n            $btnGuardar.removeAttr('data-action-mode'); // Limpiar modo\r\n        }\r\n         console.log(\"Visibilidad y botón guardar restaurados a default.\");\r\n\r\n    } catch (e) { console.error(\"Error durante resetModalForm:\", e); }\r\n} // Fin resetModalForm","// assets/src/js/admin/modal-validation.js\r\nimport $ from 'jquery';\r\n\r\n// Selectores globales (asumiendo que se definen en main.js y están disponibles en window o pasados)\r\n// O búscalos dentro de $form o $modal si es más seguro\r\nconst $diaSemana = $('#mph_dia_semana');\r\nconst $horaInicioGeneral = $('#mph_hora_inicio_general');\r\nconst $horaFinGeneral = $('#mph_hora_fin_general');\r\nconst $programasAdmisiblesContainer = $('#mph-programas-admisibles-container');\r\nconst $sedesAdmisiblesContainer = $('#mph-sedes-admisibles-container');\r\nconst $rangosAdmisiblesContainer = $('#mph-rangos-admisibles-container');\r\n// Selectores para la sección de asignación (pueden ser globales o buscados dentro de $form)\r\nconst $seccionAsignacion = $('#mph-modal-horario .mph-asignacion-especifica'); // Más específico\r\nconst $horaInicioAsignada = $('#mph_hora_inicio_asignada');\r\nconst $horaFinAsignada = $('#mph_hora_fin_asignada');\r\nconst $selectProgramaAsignado = $('#mph_programa_asignado');\r\nconst $selectSedeAsignada = $('#mph_sede_asignada');\r\nconst $selectRangoAsignado = $('#mph_rango_edad_asignado');\r\nconst $vacantes = $('#mph_vacantes');\r\nconst $bufferAntes = $('#mph_buffer_minutos_antes');\r\nconst $bufferDespues = $('#mph_buffer_minutos_despues');\r\n\r\n\r\nexport function validarFormulario($form) { // Acepta $form como argumento\r\n   console.log('--- Iniciando validarFormulario ---');\r\n    if (!$form || !$form.length) {\r\n        console.error('Error en validarFormulario: No se recibió un objeto de formulario válido.');\r\n        return false;\r\n    }\r\n    let isValid = true;\r\n    const $modal = $form.closest('#mph-modal-horario'); // Obtener el modal desde el form\r\n    const $errorModal = $modal.find('.mph-modal-error');\r\n\r\n    if ($errorModal.length) $errorModal.hide().empty();\r\n\r\n    // Obtener el modo del botón guardar que está DENTRO del form\r\n    const $btnGuardar = $form.find('#mph-guardar-horario');\r\n    const currentMode = $btnGuardar.attr('data-action-mode') || 'save_full'; // 'save_full' es el default si no hay attr\r\n    console.log(\"validarFormulario - Modo de acción detectado:\", currentMode);\r\n\r\n    // --- Validación Sección General (SOLO para modo save_full) ---\r\n    if (currentMode === 'save_full') {\r\n        console.log(\"Validando sección general para modo save_full...\");\r\n        if (!$diaSemana.val()) { $errorModal.append('<p>Seleccione un día.</p>'); isValid = false; }\r\n        const horaInicioGenVal = $horaInicioGeneral.val(); // Usar selectores globales\r\n        const horaFinGenVal = $horaFinGeneral.val();\r\n        if (!horaInicioGenVal || !horaFinGenVal) { $errorModal.append('<p>Ingrese horas generales.</p>'); isValid = false; }\r\n        else if (horaFinGenVal <= horaInicioGenVal) { $modal.find('.mph-error-hora').show(); isValid = false; }\r\n        else { $modal.find('.mph-error-hora').hide(); }\r\n\r\n        const i18n_val = window.mph_admin_obj?.i18n || {};\r\n        if ($programasAdmisiblesContainer.find('input:checked').length === 0) { $errorModal.append('<p>' + (i18n_val.error_seleccionar_programa || 'Prog.') + '</p>'); isValid = false; }\r\n        if ($sedesAdmisiblesContainer.find('input:checked').length === 0) { $errorModal.append('<p>' + (i18n_val.error_seleccionar_sede || 'Sede.') + '</p>'); isValid = false; }\r\n        if ($rangosAdmisiblesContainer.find('input:checked').length === 0) { $errorModal.append('<p>' + (i18n_val.error_seleccionar_rango || 'Rango.') + '</p>'); isValid = false; }\r\n    }\r\n\r\n\r\n    // --- Validación Sección Asignación (SOLO si está visible Y no es 'edit_vacantes') ---\r\n    // O si el modo es 'assign_to_existing' (porque la sección se muestra directamente)\r\n    const seccionAsignacionVisible = $seccionAsignacion.is(':visible'); // Usar selector global\r\n    if ( (seccionAsignacionVisible && currentMode !== 'update_vacantes') || currentMode === 'assign_to_existing' ) {\r\n        console.log(\"Validando sección de asignación...\");\r\n        const horaInicioAsigVal = $horaInicioAsignada.val();\r\n        const horaFinAsigVal = $horaFinAsignada.val();\r\n        const horaInicioGenValParaComparar = (currentMode === 'assign_to_existing') ? $form.find('#mph_hora_inicio_general').val() : $horaInicioGeneral.val();\r\n        const horaFinGenValParaComparar = (currentMode === 'assign_to_existing') ? $form.find('#mph_hora_fin_general').val() : $horaFinGeneral.val();\r\n\r\n        const $errorHoraAsignada = $modal.find('.mph-error-hora-asignada');\r\n        const i18n_asig = window.mph_admin_obj?.i18n || {};\r\n\r\n        if (!horaInicioAsigVal || !horaFinAsigVal) { $errorModal.append('<p>' + (i18n_asig.error_faltan_horas_asignadas || 'Faltan horas.') + '</p>'); isValid = false; }\r\n        else {\r\n            if (horaFinAsigVal <= horaInicioAsigVal) { $errorHoraAsignada.text(i18n_asig.error_hora_asignada_invalida || 'Fin < Inicio Asig.').show(); isValid = false; }\r\n            // Validar contra las horas GENERALES del contexto actual\r\n            else if (horaInicioGenValParaComparar && horaFinGenValParaComparar && (horaInicioAsigVal < horaInicioGenValParaComparar || horaFinAsigVal > horaFinGenValParaComparar)) {\r\n                 $errorHoraAsignada.text(i18n_asig.error_hora_asignada_rango || 'Asig. fuera rango Gral.').show(); isValid = false;\r\n            }\r\n            else { $errorHoraAsignada.hide(); }\r\n        }\r\n        if (!$selectProgramaAsignado.val()) { $errorModal.append('<p>' + (i18n_asig.error_seleccionar_programa_asig || 'Prog Asig.') + '</p>'); isValid = false; }\r\n        if (!$selectSedeAsignada.val()) { $errorModal.append('<p>' + (i18n_asig.error_seleccionar_sede_asig || 'Sede Asig.') + '</p>'); isValid = false; }\r\n        if (!$selectRangoAsignado.val()) { $errorModal.append('<p>' + (i18n_asig.error_seleccionar_rango_asig || 'Rango Asig.') + '</p>'); isValid = false; }\r\n\r\n        // La validación de vacantes y buffers se hace en el modo 'update_vacantes' y también aquí para 'save_full' y 'assign_to_existing'\r\n        if (parseInt($vacantes.val(), 10) < 0) { $errorModal.append('<p>' + (i18n_asig.error_vacantes_negativas || 'Vacantes < 0.') + '</p>'); isValid = false; }\r\n        const bufferAntesVal = parseInt($bufferAntes.val(), 10);\r\n        const bufferDespuesVal = parseInt($bufferDespues.val(), 10);\r\n        if (isNaN(bufferAntesVal) || bufferAntesVal < 0) { $errorModal.append('<p>' + (i18n_asig.error_buffer_antes_invalido || 'Buffer Antes < 0.') + '</p>'); isValid = false; }\r\n        if (isNaN(bufferDespuesVal) || bufferDespuesVal < 0) { $errorModal.append('<p>' + (i18n_asig.error_buffer_despues_invalido || 'Buffer Después < 0.') + '</p>'); isValid = false; }\r\n    }\r\n\r\n    if (!isValid && $errorModal.length) $errorModal.show();\r\n    else if (isValid) console.log(\"Validación pasada.\");\r\n\r\n    console.log('--- Finalizando validarFormulario --- Retornando:', isValid);\r\n    return isValid;\r\n}","// assets/src/js/admin/table-actions.js\r\nimport $ from 'jquery';\r\nimport { openModal, resetModalForm } from './modal-init';\r\nimport { poblarSelectsAsignacion, initFormInteractions } from './modal-form-interaction'; // Necesitamos poblar si se abre Asig.\r\n\r\n/**\r\n * Prepara el modal para el modo \"Editar Disponibilidad\" (para bloques Vacío, Mismo, etc.).\r\n * @param {jQuery} $modal - El objeto jQuery del modal.\r\n * @param {object} horarioInfo - El objeto con la info del horario.\r\n */\r\nfunction prepareModalForEditDisp($modal, horarioInfo) {\r\n    const $form = $modal.find('form#mph-form-horario');\r\n    if (!$form.length) {\r\n        console.error(\"prepareModalForEditDisp: Formulario no encontrado.\");\r\n        return;\r\n    }\r\n    console.log(\"Preparando modal para Editar Disponibilidad...\");\r\n\r\n    // 1. Aplicar clase de modo (si queremos un estilo visual diferente, o para validación)\r\n    // $modal.removeClass('mph-modal-mode-assign mph-modal-mode-edit-vacantes').addClass('mph-modal-mode-edit-disp');\r\n    // Por ahora, el modo por defecto (sin clase de modo específica o 'mph-modal-mode-add-general') es adecuado.\r\n    // resetModalForm ya quita las clases de modo y restaura la visibilidad por defecto.\r\n\r\n    // 2. Pre-llenar Sección 1: Disponibilidad General\r\n    console.log(\"Pre-llenando campos de disponibilidad general...\");\r\n    $form.find('#mph_dia_semana').val(horarioInfo.dia || '');\r\n    $form.find('#mph_hora_inicio_general').val(horarioInfo.inicio_gen || horarioInfo.inicio || ''); // Usar inicio_gen si existe, sino inicio del bloque\r\n    $form.find('#mph_hora_fin_general').val(horarioInfo.fin_gen || horarioInfo.fin || '');         // Usar fin_gen si existe, sino fin del bloque\r\n\r\n    // Pre-seleccionar checkboxes admisibles (resetModalForm ya marca los comunes)\r\n    console.log(\"Pre-marcando checkboxes admisibles del bloque original...\");\r\n    if (horarioInfo.prog_admisibles && Array.isArray(horarioInfo.prog_admisibles)) {\r\n        horarioInfo.prog_admisibles.forEach(id => { if(id) $form.find('#programa_' + id).prop('checked', true); });\r\n    }\r\n    if (horarioInfo.sede_admisibles && Array.isArray(horarioInfo.sede_admisibles)) {\r\n        horarioInfo.sede_admisibles.forEach(id => { if(id) $form.find('#sede_' + id).prop('checked', true); });\r\n    }\r\n    if (horarioInfo.rango_admisibles && Array.isArray(horarioInfo.rango_admisibles)) {\r\n        horarioInfo.rango_admisibles.forEach(id => { if(id) $form.find('#rango_edad_' + id).prop('checked', true); });\r\n    }\r\n\r\n    // 3. Asegurar que la Sección 2 (Asignación) esté oculta inicialmente\r\n    // (resetModalForm ya debería haber hecho esto)\r\n    $form.find('.mph-modal-seccion.mph-asignacion-especifica').hide();\r\n    $form.find('#mph-mostrar-asignacion').show(); // Asegurar que el botón para mostrarla esté visible\r\n\r\n    // 4. Ajustar botón Guardar (texto y modo)\r\n    const $btnGuardar = $form.find('#mph-guardar-horario');\r\n    if ($btnGuardar.length) {\r\n        const textoBoton = window.mph_admin_obj?.i18n?.actualizar_disponibilidad || 'Actualizar Disponibilidad';\r\n        $btnGuardar.text(textoBoton);\r\n        $btnGuardar.attr('data-action-mode', 'edit_existing_disp'); // Nuevo modo, o reutilizar 'save_full'\r\n                                                                  // Por ahora, 'save_full' funcionará igual\r\n                                                                  // pero 'edit_existing_disp' es más descriptivo.\r\n    }\r\n\r\n    // 5. Establecer ID del horario a editar/reemplazar\r\n    $form.find('#mph_horario_id_editando').val(horarioInfo.horario_id || '');\r\n    console.log(\"ID horario (\" + (horarioInfo.horario_id || 'N/A') + \") establecido para Editar Disponibilidad.\");\r\n}\r\n\r\n\r\n/**\r\n * Prepara el modal para el modo \"Editar Vacantes\".\r\n * @param {jQuery} $modal - El objeto jQuery del modal.\r\n * @param {object} horarioInfo - El objeto con la info del horario.\r\n */\r\nfunction prepareModalForEditVacantes($modal, horarioInfo) {\r\n    const $form = $modal.find('form#mph-form-horario');\r\n    if (!$form.length) return;\r\n    console.log(\"Preparando modal para Editar Vacantes...\");\r\n\r\n    // 1. Aplicar clase CSS (el CSS controla qué se muestra/oculta)\r\n    $modal.removeClass('mph-modal-mode-assign mph-modal-mode-edit-disp').addClass('mph-modal-mode-edit-vacantes');\r\n\r\n    // 2. Mostrar/Crear y llenar div de información #mph-editar-info\r\n    let $infoDiv = $form.find('#mph-editar-info');\r\n    if (!$infoDiv.length) {\r\n        $form.prepend('<div id=\"mph-editar-info\" style=\"margin-bottom:15px; padding-bottom:10px; border-bottom:1px solid #eee;\"></div>');\r\n        $infoDiv = $form.find('#mph-editar-info'); // Re-buscar después de añadir\r\n    }\r\n\r\n    // Construir el HTML de información\r\n    let infoHtml = '<h4>Editando Vacantes para:</h4>'; // Definir ANTES del if(horarioInfo)\r\n    if (horarioInfo) {\r\n        const dias = ['','Lunes','Martes','Miércoles','Jueves','Viernes','Sábado','Domingo'];\r\n        infoHtml += `<p><strong>Día:</strong> ${dias[horarioInfo.dia] || 'N/A'}</p>`;\r\n        infoHtml += `<p><strong>Horario:</strong> ${horarioInfo.inicio_asig || 'N/A'} - ${horarioInfo.fin_asig || 'N/A'}</p>`;\r\n        if (window.mph_admin_obj) {\r\n            const prog = mph_admin_obj.todos_programas?.find(p=>p.term_id == horarioInfo.prog_asig);\r\n            const sede = mph_admin_obj.todas_sedes?.find(s=>s.term_id == horarioInfo.sede_asig);\r\n            const rango = mph_admin_obj.todos_rangos?.find(r=>r.term_id == horarioInfo.rango_asig);\r\n            infoHtml += `<p><strong>Programa:</strong> ${prog?.name || 'N/A'}</p>`;\r\n            infoHtml += `<p><strong>Sede:</strong> ${sede?.name || 'N/A'}</p>`;\r\n            infoHtml += `<p><strong>Rango Edad:</strong> ${rango?.name || 'N/A'}</p>`;\r\n        }\r\n    } else {\r\n        infoHtml += '<p>Error al cargar información del horario.</p>'; // Añadir al HTML existente\r\n    }\r\n\r\n    // Asignar el HTML al div (si existe)\r\n    if ($infoDiv.length) {\r\n        $infoDiv.html(infoHtml); // Asignar el HTML construido\r\n        // El CSS se encarga de mostrarlo porque el modal tiene la clase .mph-modal-mode-edit-vacantes\r\n    } else {\r\n         console.warn(\"Div #mph-editar-info no encontrado, info no mostrada.\");\r\n    }\r\n\r\n\r\n    // 3. Pre-llenar input Vacantes\r\n    const $vacantesInput = $form.find('#mph_vacantes');\r\n    if ($vacantesInput.length) {\r\n         $vacantesInput.val(horarioInfo?.vacantes !== undefined ? horarioInfo.vacantes : 0);\r\n         console.log(\"Campo vacantes prellenado con:\", $vacantesInput.val());\r\n    } else { console.error(\"Input de Vacantes no encontrado al preparar modal.\"); }\r\n\r\n    // 4. Ajustar botón Guardar\r\n    const $btnGuardar = $form.find('#mph-guardar-horario');\r\n    if ($btnGuardar.length) {\r\n         const textoBoton = window.mph_admin_obj?.i18n?.actualizar_vacantes || 'Actualizar Vacantes';\r\n         $btnGuardar.text(textoBoton);\r\n         $btnGuardar.attr('data-action-mode', 'update_vacantes');\r\n         console.log(\"Botón Guardar ajustado para 'update_vacantes'.\");\r\n    }\r\n\r\n    // 5. Establecer ID\r\n    $form.find('#mph_horario_id_editando').val(horarioInfo?.horario_id || '');\r\n    console.log(\"ID horario establecido:\", horarioInfo?.horario_id);\r\n}\r\n\r\n\r\n/**\r\n * Inicializa los manejadores de eventos para los botones de acción en la tabla de horarios.\r\n * @param {string} tableContainerSelector - Selector CSS para el div que contiene la tabla.\r\n */\r\nexport function initTableActions(tableContainerSelector) {\r\n    console.log(`Inicializando acciones de tabla para \"${tableContainerSelector}\"...`);\r\n    const $tableContainer = $(tableContainerSelector);\r\n\r\n    if (!$tableContainer.length) {\r\n        console.error(\"initTableActions: Contenedor de tabla no encontrado.\");\r\n        return;\r\n    }\r\n\r\n    // --- Acción Eliminar ---\r\n    $tableContainer.on('click', '.mph-accion-eliminar', function(e) {\r\n        e.preventDefault();\r\n        const $button = $(this);\r\n        const horarioId = $button.data('horario-id');\r\n        const nonce = $button.data('nonce'); // Nonce específico para eliminar este ID\r\n        const $fila = $button.closest('tr');\r\n\r\n        // Acceso seguro al objeto global mph_admin_obj\r\n         if (typeof window.mph_admin_obj === 'undefined' || !window.mph_admin_obj.ajax_url || !window.mph_admin_obj.i18n) {\r\n             console.error(\"Error crítico: mph_admin_obj o sus propiedades no están disponibles para Eliminar.\");\r\n             alert(\"Error interno.\");\r\n             return;\r\n         }\r\n         const ajax_url = mph_admin_obj.ajax_url;\r\n         const i18n = mph_admin_obj.i18n;\r\n\r\n\r\n        if (!horarioId || !nonce) {\r\n            console.error('Error: Faltan horario_id o nonce para eliminar.');\r\n            alert(i18n.error_general || 'Error inesperado.');\r\n            return;\r\n        }\r\n\r\n        const confirmarMsg = i18n.confirmar_eliminacion || '¿Estás seguro de que deseas eliminar este horario?';\r\n        if (confirm(confirmarMsg)) {\r\n            console.log(`Intentando eliminar horario ID: ${horarioId}`);\r\n            $button.prop('disabled', true).css('opacity', 0.5);\r\n\r\n            const dataToSend = {\r\n                action: 'mph_eliminar_horario',\r\n                horario_id: horarioId,\r\n                nonce: nonce\r\n            };\r\n\r\n            $.post(ajax_url, dataToSend)\r\n                .done(function (response) {\r\n                    if (response.success) {\r\n                        console.log(`Horario ID: ${horarioId} eliminado.`);\r\n                        $fila.fadeOut(400, function() { $(this).remove(); });\r\n                        // alert(i18n.horario_eliminado || 'Horario eliminado.'); // Opcional\r\n                    } else {\r\n                        console.error('Error servidor al eliminar:', response.data?.message);\r\n                        alert(i18n.error_general + (response.data?.message ? ' (' + response.data.message + ')' : ''));\r\n                        $button.prop('disabled', false).css('opacity', 1);\r\n                    }\r\n                })\r\n                .fail(function (jqXHR, textStatus, errorThrown) {\r\n                    console.error(\"Error AJAX al eliminar:\", textStatus, errorThrown);\r\n                    alert(i18n.error_general || 'Error de comunicación.');\r\n                    $button.prop('disabled', false).css('opacity', 1);\r\n                });\r\n        } else {\r\n            console.log('Eliminación cancelada.');\r\n        }\r\n    }); // Fin click .mph-accion-eliminar\r\n\r\n    // --- Acción Asignar (Desde la tabla) ---\r\n    /* Inicia Modificación: Reescribir Acción Asignar */\r\n    $tableContainer.on('click', '.mph-accion-asignar', function(e) {\r\n         e.preventDefault();\r\n         const $button = $(this);\r\n         console.log('Botón Asignar (desde tabla) clickeado.');\r\n\r\n         try {\r\n             const horarioInfo = $button.data('horario-info');\r\n             console.log('Info Horario para Asignar (desde tabla):', horarioInfo);\r\n             if (!horarioInfo || typeof horarioInfo !== 'object' || !horarioInfo.horario_id) {\r\n                 throw new Error(\"Datos inválidos o falta horario_id en data-horario-info.\");\r\n             }\r\n\r\n             const $modal = $('#mph-modal-horario');\r\n             if (!$modal.length) { throw new Error(\"Modal #mph-modal-horario no encontrado.\"); }\r\n             const $form = $modal.find('form#mph-form-horario');\r\n             if (!$form.length) { throw new Error(\"Formulario #mph-form-horario no encontrado.\"); }\r\n\r\n             // 1. Resetear el modal a su estado por defecto\r\n             console.log(\"Reseteando modal antes de asignar...\");\r\n             resetModalForm($modal); // Esto quita clases de modo y oculta sección asignación\r\n\r\n             // 2. Aplicar clase para modo \"Asignar\" (CSS oculta sección general y muestra sección asignación)\r\n             $modal.addClass('mph-modal-mode-assign');\r\n             console.log(\"Clase 'mph-modal-mode-assign' añadida al modal.\");\r\n\r\n             // 3. Mostrar información del bloque original en #mph-editar-info\r\n             let $infoDiv = $form.find('#mph-editar-info');\r\n             if (!$infoDiv.length) { // Crear si no existe\r\n                 $form.prepend('<div id=\"mph-editar-info\"></div>');\r\n                 $infoDiv = $form.find('#mph-editar-info');\r\n             }\r\n             if ($infoDiv.length) {\r\n                 const dias = ['','Lunes','Martes','Miércoles','Jueves','Viernes','Sábado','Domingo'];\r\n                 let infoHtml = `<h4>Asignando a: ${dias[horarioInfo.dia] || ''} ${horarioInfo.inicio || ''} - ${horarioInfo.fin || ''}</h4>`;\r\n                 // Podríamos añadir los admisibles originales aquí si quisiéramos\r\n                 $infoDiv.html(infoHtml).show(); // El CSS .mph-modal-mode-assign #mph-editar-info lo muestra\r\n             }\r\n\r\n             // 4. Pre-llenar campos ocultos necesarios para que el backend sepa el contexto\r\n             $form.find('#mph_horario_id_editando').val(horarioInfo.horario_id); // ID del bloque Vacío/Mismo que se reemplaza\r\n             $form.find('#mph_dia_semana').val(horarioInfo.dia); // Este campo está oculto por CSS pero lo llenamos\r\n             $form.find('#mph_hora_inicio_general').val(horarioInfo.inicio); // Idem\r\n             $form.find('#mph_hora_fin_general').val(horarioInfo.fin);     // Idem\r\n\r\n             // Guardar los admisibles originales del bloque \"Vacío\" en algún lugar si el backend los necesita\r\n             // y no los puede deducir del horario_id_editando.\r\n             // Por ahora, el backend (mph_guardar_horario_maestro + mph_calcular_bloques)\r\n             // usa hora_inicio_general, hora_fin_general y los checkboxes de la sección 1\r\n             // para determinar los admisibles. Como la sección 1 está oculta, ¡esto es un problema!\r\n             // SOLUCIÓN: Debemos marcar los checkboxes admisibles en la sección 1 (aunque esté oculta).\r\n             console.log(\"Pre-marcando checkboxes admisibles (ocultos) del bloque original...\");\r\n             $form.find('#mph-programas-admisibles-container input').prop('checked', false); // Desmarcar todos primero\r\n             if (horarioInfo.programas_admisibles && Array.isArray(horarioInfo.programas_admisibles)) {\r\n                 horarioInfo.programas_admisibles.forEach(id => { if(id) $form.find('#programa_' + id).prop('checked', true); });\r\n             }\r\n             $form.find('#mph-sedes-admisibles-container input').prop('checked', false);\r\n             if (horarioInfo.sedes_admisibles && Array.isArray(horarioInfo.sedes_admisibles)) {\r\n                 horarioInfo.sedes_admisibles.forEach(id => { if(id) $form.find('#sede_' + id).prop('checked', true); });\r\n             }\r\n             $form.find('#mph-rangos-admisibles-container input').prop('checked', false);\r\n             if (horarioInfo.rangos_admisibles && Array.isArray(horarioInfo.rangos_admisibles)) {\r\n                 horarioInfo.rangos_admisibles.forEach(id => { if(id) $form.find('#rango_edad_' + id).prop('checked', true); });\r\n             }\r\n\r\n\r\n             // 5. Pre-llenar campos de la Sección de Asignación Específica\r\n             console.log(\"Pre-llenando campos de asignación específica...\");\r\n             $form.find('#mph_hora_inicio_asignada').val(horarioInfo.inicio); // Por defecto, ocupa todo el bloque\r\n             $form.find('#mph_hora_fin_asignada').val(horarioInfo.fin);   // Por defecto, ocupa todo el bloque\r\n             $form.find('#mph_vacantes').val(1); // Default vacantes\r\n             $form.find('#mph_buffer_minutos_antes').val(60); // Default buffer\r\n             $form.find('#mph_buffer_minutos_despues').val(60);\r\n             $form.find('#mph_buffer_linkeado').prop('checked', true);\r\n\r\n             // Poblar los selects de Programa/Sede/Rango basándose en los checkboxes recién marcados\r\n             console.log(\"Poblando selects para asignación...\");\r\n             poblarSelectsAsignacion($modal); // Usar la función importada (que lee checkboxes)\r\n\r\n             // 6. Ajustar botón Guardar\r\n             const $btnGuardar = $form.find('#mph-guardar-horario');\r\n             if ($btnGuardar.length) {\r\n                 $btnGuardar.text(window.mph_admin_obj?.i18n?.guardar_asignacion || 'Guardar Asignación'); // Nuevo texto i18n\r\n                 $btnGuardar.attr('data-action-mode', 'assign_to_existing'); // Nuevo modo\r\n             }\r\n\r\n             // 7. Abrir el modal\r\n             console.log(\"Abriendo modal para asignar a existente...\");\r\n             openModal($modal);\r\n\r\n         } catch (e) {\r\n             console.error(\"Error al preparar modal para Asignar:\", e);\r\n             alert(\"Error al preparar el formulario de asignación.\");\r\n         }\r\n    });\r\n\r\n    // --- Acción Editar (Disponibilidad) ---\r\n    $tableContainer.on('click', '.mph-accion-editar-disp', function(e) {\r\n        e.preventDefault();\r\n        const $button = $(this);\r\n        console.log('Botón Editar Disponibilidad clickeado.');\r\n\r\n        try {\r\n            const horarioInfo = $button.data('horario-info');\r\n            console.log('Info Horario para Editar Disp:', horarioInfo);\r\n            if (!horarioInfo || typeof horarioInfo !== 'object' || !horarioInfo.horario_id) {\r\n                throw new Error(\"Datos inválidos o falta horario_id en data-horario-info.\");\r\n            }\r\n\r\n            const $modal = $('#mph-modal-horario');\r\n            if (!$modal.length) { throw new Error(\"Modal #mph-modal-horario no encontrado.\"); }\r\n\r\n            resetModalForm($modal); // Resetear primero\r\n            prepareModalForEditDisp($modal, horarioInfo); // Preparar para este modo\r\n            openModal($modal); // Abrir\r\n\r\n       } catch (e) {\r\n            console.error(\"Error al preparar modal para Editar Disponibilidad:\", e);\r\n            alert(window.mph_admin_obj?.i18n?.error_preparar_edicion_disp || \"Error al preparar el formulario de edición de disponibilidad.\");\r\n       }\r\n   });\r\n\r\n    // --- Acción Editar Vacantes ---\r\n     $tableContainer.on('click', '.mph-accion-editar-vacantes', function(e) {\r\n         e.preventDefault();\r\n         const $button = $(this);\r\n         console.log('Botón Editar Vacantes clickeado.');\r\n         try {\r\n             const horarioInfo = $button.data('horario-info');\r\n             // ... (verificación horarioInfo) ...\r\n             const $modal = $('#mph-modal-horario');\r\n             if (!$modal.length) { \r\n                console.error(\"Error en prepareModalForEditVacantes: Modal #mph-modal-horario no encontrado.\");\r\n                throw new Error(\"Modal #mph-modal-horario no encontrado.\"); // Re-lanzar para que el catch externo lo maneje\r\n            }\r\n\r\n             resetModalForm($modal); // Resetear primero (quita clases de modo)\r\n             prepareModalForEditVacantes($modal, horarioInfo); // Preparar (añade clase de modo)\r\n             openModal($modal); // Abrir\r\n\r\n        } catch (e) { console.error(\"Error al preparar/abrir modal para Editar Vacantes:\", e);\r\n        alert(window.mph_admin_obj?.i18n?.error_preparar_edicion); }\r\n    });\r\n    \r\n    // --- Acción Vaciar */\r\n    $tableContainer.on('click', '.mph-accion-vaciar', function(e) {\r\n         e.preventDefault();\r\n         const $button = $(this);\r\n         const horarioId = $button.data('horario-id');\r\n         const nonce = $button.data('nonce');\r\n         const $fila = $button.closest('tr'); // Fila para feedback visual\r\n\r\n         if (!horarioId || !nonce) { console.error('Error: Faltan horario_id o nonce para vaciar.');\r\n         alert(window.mph_admin_obj?.i18n?.error_general || 'Error inesperado.'); return; }\r\n         \r\n         if (typeof window.mph_admin_obj === 'undefined' || !window.mph_admin_obj.ajax_url || !window.mph_admin_obj.i18n) { console.error(\"Error crítico: mph_admin_obj o sus propiedades no están disponibles para Vaciar.\");\r\n         alert(window.mph_admin_obj?.i18n?.error_configuracion /*|| \"Error interno de configuración.\"*/); return; }\r\n         const ajax_url = mph_admin_obj.ajax_url;\r\n         const i18n = mph_admin_obj.i18n;\r\n\r\n         const confirmarMsg = i18n.confirmar_vaciado || '¿Estás seguro? Esto convertirá el horario asignado en un bloque vacío.';\r\n         if (confirm(confirmarMsg)) {\r\n             console.log(`Intentando vaciar horario ID: ${horarioId}`);\r\n             $button.prop('disabled', true).css('opacity', 0.5);\r\n\r\n             const dataToSend = {\r\n                 action: 'mph_vaciar_horario', // NUEVA ACCIÓN PHP\r\n                 horario_id: horarioId,\r\n                 nonce: nonce // Nonce específico para vaciar\r\n             };\r\n\r\n             $.post(ajax_url, dataToSend)\r\n                 .done(function (response) {\r\n                     if (response.success) {\r\n                         console.log(`Horario ID: ${horarioId} vaciado con éxito.`);\r\n                         // Actualizar la tabla completa para reflejar el cambio\r\n                         if (response.data && response.data.html_tabla && $tableContainer.length) {\r\n                             console.log(\"Actualizando tabla de horarios después de vaciar...\");\r\n                             $tableContainer.html(response.data.html_tabla);\r\n                         } else {\r\n                             console.warn(\"Respuesta exitosa pero no se encontró HTML de tabla para actualizar.\");\r\n                             // Quizás solo actualizar la fila visualmente? Más complejo.\r\n                             $button.prop('disabled', false).css('opacity', 1); // Reactivar si no hay update\r\n                         }\r\n                         // alert(i18n.horario_vaciado || 'Horario vaciado.'); // Opcional\r\n                     } else {\r\n                        console.error('Error servidor al vaciar:', response.data?.message);\r\n                        alert( (window.mph_admin_obj?.i18n?.error_general || 'Error.') + (response.data?.message ? ' (' + response.data.message + ')' : '')); $button.prop('disabled', false).css('opacity', 1); }\r\n                 })\r\n                 .fail(function (jqXHR, textStatus, errorThrown) { console.error(\"Error AJAX al vaciar:\", textStatus, errorThrown, jqXHR.responseText); \r\n                    alert(window.mph_admin_obj?.i18n?.error_comunicacion /*|| 'Error de comunicación al intentar vaciar.'*/); $button.prop('disabled', false).css('opacity', 1); });\r\n         } else { console.log('Vaciado cancelado.'); }\r\n    });\r\n\r\n    console.log(`Acciones de tabla para \"${tableContainerSelector}\" inicializadas.`);\r\n}","module.exports = jQuery;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// assets/src/js/admin/main.js\r\nimport $ from 'jquery';\r\nimport { initDialog, openModal, closeModal, resetModalForm } from './modal-init'; // Sin initModalButtons\r\nimport { initFormInteractions } from './modal-form-interaction';\r\nimport { initAjaxSubmit } from './modal-ajax';\r\nimport { initTableActions } from './table-actions';\r\n\r\n$(window).on('load', function() {\r\n    console.log('Admin JS Bundle Loaded (window.load)');\r\n\r\n    const $modal = $('#mph-modal-horario');\r\n    if (!$modal.length) {\r\n         console.error(\"CRÍTICO: Elemento modal #mph-modal-horario no encontrado en window.load.\");\r\n         return;\r\n    }\r\n\r\n    function checkAdminObject() {\r\n        if (typeof window.mph_admin_obj !== 'undefined' && window.mph_admin_obj.todos_programas) {\r\n            console.log('mph_admin_obj está listo.');\r\n            initDependentModules();\r\n        } else {\r\n            console.log('mph_admin_obj aún no está listo, reintentando...');\r\n            setTimeout(checkAdminObject, 100);\r\n        }\r\n    }\r\n\r\n    function initDependentModules() {\r\n        console.log(\"Inicializando módulos dependientes de mph_admin_obj...\");\r\n        initFormInteractions($modal);\r\n        initAjaxSubmit($modal); // Pasar $modal\r\n        initTableActions('#mph-tabla-horarios-container');\r\n        // initModalButtons($modal); // ELIMINADA ESTA LLAMADA\r\n        console.log(\"Módulos dependientes inicializados.\");\r\n    }\r\n\r\n    console.log(\"Inicializando diálogo...\");\r\n    initDialog($modal, resetModalForm); // Pasar $modal\r\n\r\n    // Manejador Botón Cancelar (puesto aquí por simplicidad de acceso a $modal y closeModal)\r\n     if ($modal.length) {\r\n         $modal.on('click', '#mph-cancelar-modal', function () {\r\n             console.log(\"Botón Cancelar Clickeado (desde main.js)\");\r\n             closeModal($modal); // Llamar a closeModal pasando $modal\r\n         });\r\n         console.log(\"Manejador para #mph-cancelar-modal inicializado (en main.js).\");\r\n    }\r\n\r\n    // Manejador Botón Abrir\r\n    const $metaBoxWrapper = $('.mph-gestion-horarios-wrapper');\r\n    if ($metaBoxWrapper.length) {\r\n        $metaBoxWrapper.on('click', '#mph-abrir-modal-horario', function () {\r\n            console.log('Abrir Modal Clicked');\r\n            resetModalForm($modal); // Pasar $modal\r\n            openModal($modal); // Pasar $modal\r\n        });\r\n    } else { console.warn(\"Wrapper del Metabox no encontrado.\"); }\r\n\r\n    // Iniciar la verificación para el objeto localizado\r\n    checkAdminObject();\r\n\r\n    console.log('MPH Admin Initializations Started...');\r\n}); // Fin window.load"],"names":["$","validarFormulario","closeModal","initAjaxSubmit","$modal","console","log","length","find","error","$spinnerModal","$feedbackModal","$errorModal","$tablaContainer","on","e","window","mph_admin_obj","$button","$form","alert","actionMode","attr","isValid","$vacantesInput","vacantesVal","parseInt","val","isNaN","hide","text","_window$mph_admin_obj","i18n","error_vacantes_negativas","show","addClass","prop","formData","serialize","ajax_url","removeClass","dataToSend","ajaxAction","nonceValue","nonceFieldName","$nonceField","_window$mph_admin_obj2","error_seguridad_interna","horarioId","_defineProperty","action","horario_id","vacantes","concat","post","done","response","success","horario_guardado","data","html_tabla","html","warn","setTimeout","_response$data","_response$data2","message","error_general","fail","jqXHR","textStatus","errorThrown","responseText","status","error_seguridad","always","$seccionAsignacion","$btnMostrarAsignacion","$programasAdmisiblesContainer","$sedesAdmisiblesContainer","$rangosAdmisiblesContainer","$selectProgramaAsignado","$selectSedeAsignada","$selectRangoAsignado","$horaInicioGeneral","$horaFinGeneral","$horaInicioAsignada","$horaFinAsignada","$bufferAntes","$bufferDespues","$bufferLinkeado","poblarSelectsAsignacion","todos_programas","empty","append","value","primerProgramaNoComunOption","primerProgramaOption","primerSedeNoComunOption","primerSedeOption","primerRangoNoComunOption","primerRangoOption","each","termId","termName","parent","trim","replace","programaData","p","term_id","esComun","es_comun","$option","sedeData","todas_sedes","s","esSedeComun","rangoData","todos_rangos","r","esRangoComun","sincronizarBuffers","campoModificado","is","valor","initFormInteractions","$seccion","slideToggle","$errorDiv","inicioAsig","finAsig","inicioGen","finGen","error_hora_asignada_invalida","error_hora_asignada_rango","resetCallback","initDialog","modalSelector","closeCallback","dialog","autoOpen","modal","width","height","draggable","resizable","closeText","classes","open","close","openModal","hasClass","resetModalForm","$dialogElement","children","reset","$btnGuardar","textoOriginal","guardar_horario","removeAttr","$diaSemana","$vacantes","closest","currentMode","horaInicioGenVal","horaFinGenVal","i18n_val","error_seleccionar_programa","error_seleccionar_sede","error_seleccionar_rango","seccionAsignacionVisible","horaInicioAsigVal","horaFinAsigVal","horaInicioGenValParaComparar","horaFinGenValParaComparar","$errorHoraAsignada","i18n_asig","error_faltan_horas_asignadas","error_seleccionar_programa_asig","error_seleccionar_sede_asig","error_seleccionar_rango_asig","bufferAntesVal","bufferDespuesVal","error_buffer_antes_invalido","error_buffer_despues_invalido","prepareModalForEditDisp","horarioInfo","dia","inicio_gen","inicio","fin_gen","fin","prog_admisibles","Array","isArray","forEach","id","sede_admisibles","rango_admisibles","textoBoton","actualizar_disponibilidad","prepareModalForEditVacantes","$infoDiv","prepend","infoHtml","dias","inicio_asig","fin_asig","_mph_admin_obj$todos_","_mph_admin_obj$todas_","_mph_admin_obj$todos_2","prog","prog_asig","sede","sede_asig","rango","rango_asig","name","undefined","actualizar_vacantes","initTableActions","tableContainerSelector","$tableContainer","preventDefault","nonce","$fila","confirmarMsg","confirmar_eliminacion","confirm","css","fadeOut","remove","_typeof","Error","programas_admisibles","sedes_admisibles","rangos_admisibles","_window$mph_admin_obj3","guardar_asignacion","_window$mph_admin_obj4","error_preparar_edicion_disp","_window$mph_admin_obj5","error_preparar_edicion","_window$mph_admin_obj6","_window$mph_admin_obj7","error_configuracion","confirmar_vaciado","_response$data3","_window$mph_admin_obj8","_response$data4","_window$mph_admin_obj9","error_comunicacion","checkAdminObject","initDependentModules","$metaBoxWrapper"],"sourceRoot":""}